---

### **Postify H5 应用功能需求说明**  
**目标**：开发一款基于移动端浏览器的H5工具，将用户输入的Markdown内容快速转换为适配社交平台的**纯文本**或**长图片**，并提供一键复制/保存功能。

---

### **一、核心功能模块**
#### 1. **Markdown输入与解析**
   - **输入界面**  
     - 提供全屏高度的文本输入框，支持粘贴或手动输入Markdown内容。  
     - 占位符提示：“请输入或粘贴Markdown内容（支持**加粗**、## 标题等语法）”。  
   - **实时预览**（可选）  
     - 在输入框右侧提供分栏预览模式，实时显示转换后的纯文本效果。

#### 2. **纯文本转换与复制**
   - **转换规则**  
     - 自动移除Markdown符号（如`**`、`#`），保留排版结构（如换行、段落间距）。  
     - 高级替换（如将 `- 列表项` 转为 `• 列表项`）。  
   - **交互流程**  
     1. 用户点击“复制纯文本”按钮。  
     2. 系统自动转换内容，弹出编辑窗口显示结果。  
     3. 用户可手动修改文本，点击“复制”按钮后：  
        - 成功：显示Toast提示“已复制到剪贴板”。  
        - 失败（如iOS限制）：提示“请手动选择文本并复制”。  

#### 3. **长图片生成与导出**
   - **模板系统**  
     - 提供至少3种预设模板（如极简白底、小红书风格、Twitter深色模式）。  
     - 模板定义内容：背景色、字体样式、边距、装饰元素（如分隔线、图标）。  
   - **交互流程**  
     1. 用户点击“导出长图片”按钮。  
     2. 弹出模板选择栏（横向滑动切换），点击模板后进入预览页。  
     3. 预览页支持手势缩放查看细节，点击“保存”按钮调用浏览器下载功能。  
   - **图片要求**  
     - 分辨率：适配移动端屏幕宽度，高清无损（最小宽度1080px）。  
     - 格式：PNG（透明背景支持）。  

---

### **二、用户界面（UI）需求**
#### 1. **主界面布局**
   - **输入区**：顶部占屏70%的文本输入区域，支持滚动。  
   - **操作区**：底部固定双按钮（“复制纯文本”和“导出长图片”），按钮样式醒目且间距合理。  

#### 2. **弹窗与预览**
   - **纯文本编辑窗**：  
     - 模态弹窗，覆盖80%屏幕高度，右上角固定“复制”按钮。  
     - 文本区域可编辑，支持滚动和基础光标操作。  
   - **图片预览页**：  
     - 全屏展示，顶部为模板切换栏，底部为操作按钮。  
     - 图片区域自适应高度，支持双指缩放。  

---

### **三、技术需求**
#### 1. **核心依赖**
   - **Markdown解析库**：需轻量化（如`marked.js`），禁止服务端依赖。  
   - **图片生成库**：基于`html2canvas`实现网页截图，需解决iOS模糊问题。  

#### 2. **浏览器兼容性**
   - **必兼容**：Chrome（最新版）、Safari（iOS 13+）、微信内置浏览器。  
   - **降级方案**：  
     - 若浏览器不支持剪贴板API，显示手动复制引导提示。  
     - 若`html2canvas`无法渲染，提示“暂不支持此浏览器导出图片”。  

#### 3. **性能指标**
   - **加载速度**：首屏加载时间 ≤ 2秒（静态资源需CDN加速）。  
   - **图片生成时间**：从点击按钮到预览出现 ≤ 3秒（需懒加载资源）。  

---

### **四、非功能性需求**
#### 1. **用户体验**
   - **响应式设计**：适配主流手机屏幕（最小宽度320px）。  
   - **错误处理**：  
     - 输入为空时点击按钮，提示“请先输入内容”。  
     - 图片生成失败时提示“生成失败，请重试或更换模板”。  

#### 2. **数据与隐私**  
   - **无后端服务**：所有操作在浏览器端完成，禁止上传用户数据。  
   - **本地缓存**：自动保存用户最后一次输入内容（关闭页面后清除）。  

#### 3. **扩展性预留**  
   - **API接口预留**：未来可接入“AI排版优化建议”模块。  
   - **模板配置接口**：支持后续通过JSON文件动态添加新模板。  

---

### **五、优先级排序**
| 功能                | 优先级 | 说明                          |
|---------------------|--------|-----------------------------|
| Markdown基础转换     | P0     | 支持加粗、标题、列表的转换      |
| 纯文本复制（安卓/iOS）| P0     | 覆盖主流机型剪贴板操作          |
| 长图片导出（基础模板）| P1     | 至少1个模板可用                |
| 手势缩放预览         | P2     | 提升图片查看体验               |
| 暗色模式适配         | P2     | 根据系统设置自动切换模板        |